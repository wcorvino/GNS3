!
!
!
!
!
!
!
!
!
!

!
version 12.3
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname R2
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$mesw$U/3PM3W0eCvqdPQB/RvYP/
!
no aaa new-model
ip subnet-zero
no ip icmp rate-limit unreachable
ip cef
!
!
ip tcp synwait-time 5
!
no ip domain lookup
ip vrf VRF-B
 rd 2:2
 route-target export 2:2
 route-target import 65000:4
!
ip vrf VRF-E
 rd 2:229
 route-target export 2:229
 route-target import 65000:2
!
ip vrf VRF-O
 rd 2:329
 route-target export 2:329
 route-target import 65000:3
!
ip vrf VRF-R
 rd 2:129
 route-target export 2:129
 route-target import 65000:1
!
ip audit po max-events 100
mpls label protocol ldp
!
!
!
!
!
!
!
!
!
!
!
!
!
! 
!
!
!
!
interface Loopback0
 ip address 2.2.2.2 255.255.255.255
!
interface Loopback1
 ip vrf forwarding VRF-R
 ip address 2.2.2.2 255.255.255.255
!
interface Loopback2
 ip vrf forwarding VRF-E
 ip address 2.2.2.2 255.255.255.255
!
interface Loopback3
 ip vrf forwarding VRF-O
 ip address 2.2.2.2 255.255.255.255
!
interface Loopback4
 ip vrf forwarding VRF-B
 ip address 2.2.2.2 255.255.255.255
!
interface Tunnel129
 bandwidth 100000
 ip vrf forwarding VRF-R
 ip address 10.1.129.2 255.255.255.0
 ip broadcast-address 10.1.129.255
 ip mtu 1400
 ip tcp adjust-mss 1360
 tunnel source 10.222.29.2
 tunnel destination 10.222.29.9
!
interface Tunnel229
 bandwidth 100000
 ip vrf forwarding VRF-E
 ip address 10.1.129.2 255.255.255.0
 ip broadcast-address 10.1.129.255
 ip mtu 1400
 ip tcp adjust-mss 1360
 tunnel source 10.22.29.2
 tunnel destination 10.22.29.9
!
interface Tunnel329
 bandwidth 100000
 ip vrf forwarding VRF-O
 ip address 10.1.129.2 255.255.255.0
 ip broadcast-address 10.1.129.255
 ip mtu 1400
 ip tcp adjust-mss 1360
 tunnel source 10.2.29.2
 tunnel destination 10.2.29.9
!
interface FastEthernet0/0
 ip vrf forwarding VRF-B
 ip address 10.1.29.2 255.255.255.0
 speed 100
 full-duplex
!
interface Serial0/0
 no ip address
 encapsulation frame-relay
 no keepalive
 clock rate 2000000
!
interface Serial0/0.12 point-to-point
 ip vrf forwarding VRF-R
 ip address 10.1.12.2 255.255.255.248
 frame-relay interface-dlci 120   
!
interface Serial0/0.112 point-to-point
 ip vrf forwarding VRF-E
 ip address 10.1.112.2 255.255.255.248
 frame-relay interface-dlci 121   
!
interface Serial0/0.212 point-to-point
 ip vrf forwarding VRF-O
 ip address 10.1.212.2 255.255.255.248
 ip ospf network point-to-point
 frame-relay interface-dlci 122   
!
interface Serial0/0.312 point-to-point
 ip vrf forwarding VRF-B
 ip address 10.1.12.2 255.255.255.248
 ip ospf network point-to-point
 frame-relay interface-dlci 123   
!
interface FastEthernet0/1
 description no vrf interface
 ip address 10.22.29.2 255.255.255.0 secondary
 ip address 10.222.29.2 255.255.255.0 secondary
 ip address 10.2.29.2 255.255.255.0
 duplex auto
 speed auto
!
interface Serial0/1
 no ip address
 encapsulation frame-relay
 no keepalive
 clock rate 2000000
!
interface Serial0/1.23 point-to-point
 ip vrf forwarding VRF-R
 ip address 10.1.23.2 255.255.255.248
 frame-relay interface-dlci 230   
!
interface Serial0/1.123 point-to-point
 ip vrf forwarding VRF-E
 ip address 10.1.123.2 255.255.255.248
 frame-relay interface-dlci 231   
!
interface Serial0/1.223 point-to-point
 ip vrf forwarding VRF-O
 ip address 10.1.223.2 255.255.255.248
 ip ospf network point-to-point
 frame-relay interface-dlci 232   
!
interface Serial0/1.323 point-to-point
 ip vrf forwarding VRF-B
 ip address 10.1.23.2 255.255.255.248
 ip ospf network point-to-point
 frame-relay interface-dlci 233   
!
router eigrp 1
 no auto-summary
 !
 address-family ipv4 vrf VRF-E
 network 2.2.2.2 0.0.0.0
 network 10.1.112.0 0.0.0.7
 network 10.1.123.0 0.0.0.7
 no auto-summary
 autonomous-system 1
 exit-address-family
!
router ospf 1 vrf VRF-O
 router-id 2.2.2.2
 log-adjacency-changes
 network 2.2.2.2 0.0.0.0 area 0
 network 10.1.212.0 0.0.0.7 area 0
 network 10.1.223.0 0.0.0.7 area 0
!
router ospf 2 vrf VRF-B
 log-adjacency-changes
 network 2.2.2.2 0.0.0.0 area 0
 network 10.1.212.0 0.0.0.7 area 0
 network 10.1.223.0 0.0.0.7 area 0
!
router rip
 !
 address-family ipv4 vrf VRF-R
 network 2.0.0.0
 network 10.0.0.0
 no auto-summary
 version 2
 exit-address-family
!
router bgp 2
 no synchronization
 bgp router-id 2.2.2.2
 bgp log-neighbor-changes
 no auto-summary
 !
 address-family ipv4 vrf VRF-R
 neighbor 10.1.129.9 remote-as 65000
 neighbor 10.1.129.9 ebgp-multihop 3
 neighbor 10.1.129.9 update-source Tunnel129
 neighbor 10.1.129.9 activate
 no auto-summary
 no synchronization
 network 2.2.2.2 mask 255.255.255.255
 exit-address-family
 !
 address-family ipv4 vrf VRF-O
 neighbor 10.1.129.9 remote-as 65000
 neighbor 10.1.129.9 ebgp-multihop 3
 neighbor 10.1.129.9 update-source Tunnel329
 neighbor 10.1.129.9 activate
 no auto-summary
 no synchronization
 network 2.2.2.2 mask 255.255.255.255
 exit-address-family
 !
 address-family ipv4 vrf VRF-E
 neighbor 10.1.129.9 remote-as 65000
 neighbor 10.1.129.9 ebgp-multihop 3
 neighbor 10.1.129.9 update-source Tunnel229
 neighbor 10.1.129.9 activate
 no auto-summary
 no synchronization
 network 2.2.2.2 mask 255.255.255.255
 exit-address-family
 !
 address-family ipv4 vrf VRF-B
 neighbor 10.1.12.1 remote-as 1
 neighbor 10.1.12.1 activate
 neighbor 10.1.23.3 remote-as 2
 neighbor 10.1.23.3 activate
 neighbor 10.1.29.9 remote-as 65000
 neighbor 10.1.29.9 activate
 no auto-summary
 no synchronization
 network 2.2.2.2 mask 255.255.255.255
 exit-address-family
!
ip classless
ip route 1.1.1.1 255.255.255.255 FastEthernet0/0
ip route 10.1.29.9 255.255.255.255 FastEthernet0/0
!
no ip http server
no ip http secure-server
!
no cdp log mismatch duplex
!
!
!
!
!
!
!
!
!
!
line con 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line aux 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line vty 0 4
 password cisco
 login
!
end
